<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Rosettastonekit by endoze</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Rosettastonekit</h1>
        <p>Magical Object Mapping framework for iOS/OS X</p>

        <p class="view"><a href="https://github.com/endoze/RosettaStoneKit">View the Project on GitHub <small>endoze/RosettaStoneKit</small></a></p>


        <ul>
          <li><a href="https://github.com/endoze/RosettaStoneKit/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/endoze/RosettaStoneKit/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/endoze/RosettaStoneKit">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><img src="https://raw.githubusercontent.com/endoze/RosettaStoneKit/4d82b6268aae692aa6f3f34f8198fb37bc5cb5c5/RosettaStoneKitWithText.png" alt="RosettaStoneKitLogo"></p>

<p>RosettaStoneKit is a magical Object Mapping framework. It converts dictionaries
and arrays of data into instances of any classes. It can also convert your
custom objects into dictionaries and arrays.</p>

<h2>
<a id="motivation" class="anchor" href="#motivation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Motivation</h2>

<p>There are other frameworks available that provide the same functionality, but
they all made design decisions that limit their usefulness. This framework
does not require that you subclass some special class that adds in all of the
magic for you. It doesn't require a category on NSObject that pollutes every
object with additional methods. And finally, the intent is to do one thing and
do it very well. This framework doesn't include networking code or any other
features.</p>

<h2>
<a id="show-me-the-code" class="anchor" href="#show-me-the-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Show me the code</h2>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// User.h</span>

<span class="pl-st">@interface</span> <span class="pl-en">User</span>

<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">copy</span>) <span class="pl-s3">NSString</span> *firstName;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSNumber</span> *userId;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSDate</span> *birthday;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSString</span> *lastName;

<span class="pl-st">@end</span></pre></div>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// Elsewhere</span>

<span class="pl-s3">NSDictionary</span> *userDictionary = @{
  <span class="pl-s1"><span class="pl-pds">@"</span>firstName<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>Joe<span class="pl-pds">"</span></span>,
  <span class="pl-s1"><span class="pl-pds">@"</span>userId<span class="pl-pds">"</span></span>: <span class="pl-c1">42</span>,
  <span class="pl-s1"><span class="pl-pds">@"</span>birthday<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>1970-01-01T00:00:00.000Z<span class="pl-pds">"</span></span>,
  <span class="pl-s1"><span class="pl-pds">@"</span>lastName<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>User<span class="pl-pds">"</span></span>
};

RosettaStone *stone = [RosettaStone <span class="pl-s3">sharedInstance</span>];

User *joeUser = [stone <span class="pl-s3">translate:</span>userDictionary <span class="pl-s3">toClass:</span>[User <span class="pl-s3">class</span>]];</pre></div>

<h3>
<a id="when-things-arent-so-perfect" class="anchor" href="#when-things-arent-so-perfect" aria-hidden="true"><span class="octicon octicon-link"></span></a>When things arenâ€™t so perfect</h3>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// Team.h</span>

<span class="pl-st">@interface</span> <span class="pl-en">Team</span>

<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">copy</span>) <span class="pl-s3">NSString</span> *name;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSNumber</span> *teamNumber;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSArray</span> *games;

<span class="pl-st">@end</span></pre></div>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// Elsewhere</span>

<span class="pl-s3">NSDictionary</span> *teamDictionary = @{
  <span class="pl-s1"><span class="pl-pds">@"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>Piggers<span class="pl-pds">"</span></span>,
  <span class="pl-s1"><span class="pl-pds">@"</span>number<span class="pl-pds">"</span></span>: <span class="pl-c1">42</span>,
  <span class="pl-s1"><span class="pl-pds">@"</span>games<span class="pl-pds">"</span></span>: @[
    @{ <span class="pl-s1"><span class="pl-pds">@"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>Table Hocky championships<span class="pl-pds">"</span></span>},
    @{ <span class="pl-s1"><span class="pl-pds">@"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>Ping Pong championships<span class="pl-pds">"</span></span>}
  ]
};

RosettaStone *stone = [RosettaStone <span class="pl-s3">sharedInstance</span>];

PropertyTranslator *numberTranslator = [propertyTranslatorForClass:[Team <span class="pl-s3">class</span>] <span class="pl-s3">fromKey:</span><span class="pl-s1"><span class="pl-pds">@"</span>number<span class="pl-pds">"</span></span> <span class="pl-s3">toProperty:</span><span class="pl-s1"><span class="pl-pds">@"</span>teamNumber<span class="pl-pds">"</span></span>];
PropertyTranslator *gamesTranslator = [propertyTranslatorForClass:[Team <span class="pl-s3">class</span>] <span class="pl-s3">fromArrayKey:</span><span class="pl-s1"><span class="pl-pds">@"</span>games<span class="pl-pds">"</span></span> <span class="pl-s3">toArrayProperty:</span><span class="pl-s1"><span class="pl-pds">@"</span>games<span class="pl-pds">"</span></span> <span class="pl-s3">withClass:</span>[Game <span class="pl-s3">class</span>]];

[stone <span class="pl-s3">registerPropertyTranslator:</span>numberTranslator];
[stone <span class="pl-s3">registerPropertyTranslator:</span>gamesTranslator];

Team *piggers = [stone <span class="pl-s3">translate:</span>teamDictionary <span class="pl-s3">toClass:</span>[Team <span class="pl-s3">class</span>]];</pre></div>

<h3>
<a id="when-you-really-need-to-change-stuff" class="anchor" href="#when-you-really-need-to-change-stuff" aria-hidden="true"><span class="octicon octicon-link"></span></a>When you really need to change stuff</h3>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// Game.h</span>

<span class="pl-st">typedef</span> <span class="pl-st">enum</span> : <span class="pl-st">NSUInteger</span> {
  PingPongGameType,
  FoosballGameType,
  TableHockeyGameType,
  NoGameType,
} GameType;

<span class="pl-st">@interface</span> <span class="pl-en">Game</span>

<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">copy</span>) <span class="pl-s3">NSString</span> *name;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>) GameType type;

<span class="pl-st">@end</span></pre></div>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// Elsewhere</span>

<span class="pl-s3">NSDictionary</span> *gameDictionary = @{
  <span class="pl-s1"><span class="pl-pds">@"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">@"</span>FoosBall Championships<span class="pl-pds">"</span></span>,
  <span class="pl-s1"><span class="pl-pds">@"</span>type<span class="pl-pds">"</span></span>: <span class="pl-c1">2</span>
};

RosettaStone *stone = [RosettaStone <span class="pl-s3">sharedInstance</span>];
PropertyTranslator *gameTypeTranslator = [propertyTranslatorForClass:[Game <span class="pl-s3">class</span>]
                                                             fromKey:<span class="pl-s1"><span class="pl-pds">@"</span>type<span class="pl-pds">"</span></span> <span class="pl-s3">toProperty:</span><span class="pl-s1"><span class="pl-pds">@"</span>type<span class="pl-pds">"</span></span>
                                               <span class="pl-s3">withInterpolatorBlock:</span>^<span class="pl-s3">id</span>(<span class="pl-st">id</span> propertyValue) {
  <span class="pl-st">NSUInteger</span> number = [(<span class="pl-s3">NSNumber</span> *)propertyValue <span class="pl-s3">unsignedIntegerValue</span>];

  <span class="pl-k">switch</span> (number) {
    <span class="pl-k">case</span> <span class="pl-c1">1</span>:
      <span class="pl-k">return</span> PingPongGameType;
    <span class="pl-k">case</span> <span class="pl-c1">2</span>:
      <span class="pl-k">return</span> FoosballGameType;
    <span class="pl-k">case</span> <span class="pl-c1">3</span>:
      <span class="pl-k">return</span> TableHockeyGameType;
    <span class="pl-k">default</span>:
      <span class="pl-k">return</span> NoGameType;
  }
}];
[stone <span class="pl-s3">registerPropertyTranslator:</span>gameTypeTranslator];

Game *foosballChampionshipGame = [stone <span class="pl-s3">translate:</span>gameDictionary <span class="pl-s3">toClass:</span>[Game <span class="pl-s3">class</span>]];</pre></div>

<h3>
<a id="converting-your-objects-into-dictionaries" class="anchor" href="#converting-your-objects-into-dictionaries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Converting your objects into dictionaries</h3>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// User.h</span>

<span class="pl-st">@interface</span> <span class="pl-en">User</span>

<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">copy</span>) <span class="pl-s3">NSString</span> *firstName;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSNumber</span> *userId;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSDate</span> *birthday;
<span class="pl-k">@property</span> (<span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-s3">NSString</span> *lastName;

<span class="pl-st">@end</span></pre></div>

<div class="highlight highlight-objective-c"><pre><span class="pl-c">// Elsewhere</span>

User *joeUser = [User <span class="pl-s3">new</span>];
joeUser.firstName = <span class="pl-s1"><span class="pl-pds">@"</span>Joe<span class="pl-pds">"</span></span>;
joeUser.userId = @<span class="pl-c1">2</span>;
joeUser.lastName = <span class="pl-s1"><span class="pl-pds">@"</span>User<span class="pl-pds">"</span></span>;

RosettaStone *stone = [RosettaStone <span class="pl-s3">sharedInstance</span>];

<span class="pl-s3">NSDictionary</span> *joeUserDictionary = [stone <span class="pl-s3">translateToDictionary:</span>joeUser];</pre></div>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/endoze">endoze</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>